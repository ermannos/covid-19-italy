(this["webpackJsonpcovid-italia"]=this["webpackJsonpcovid-italia"]||[]).push([[0],{247:function(e,i,t){},445:function(e,i,t){},446:function(e,i,t){"use strict";t.r(i);var n=t(4),a=t(1),o=t.n(a),c=t(16),r=t.n(c),s=t(208),l=t(492),d=t(99),u=t(491),m=(t(247),t(127)),b=t(18),j=t(28),g=t(496),p=t(480),h=t(481),v=t(482),O=t(493),f=t(498),x=t(484),z=t(499),R=t(476),C=t(20),T=t(68),D=t.n(T),k=t(132),A=t(93),S=t.n(A),y=[],_=[],P=function(e){var i=[];return S.a.get(e).then((function(e){return e.data})).then((function(e){return e.forEach((function(e){var t={data:e.data,stato:e.stato,codiceRegione:e.codice_regione,denominazioneRegione:e.denominazione_regione,lat:e.lat,long:e.lang,ricoveratiConSintomi:e.ricoverati_con_sintomi,terapiaIntensiva:e.terapia_intensiva,totaleOspedalizzati:e.totale_ospedalzzati,isolamentoDomiciliare:e.isolamento_domiciliare,totalePositivi:e.totale_positivi,variazioneTotalePositivi:e.variazione_totale_positivi,nuoviPositivi:e.nuovi_positivi,dimessiGuariti:e.dimessi_guariti,deceduti:0,decedutiTotali:e.deceduti,casiDaSospettoDiagnostico:e.casi_da_sospetto_diagnostico,casiDaScreening:e.casi_da_screening,totaleCasi:e.totale_casi,tamponi:0,tamponiTotali:e.tamponi,positiviTamponi:0,casiTestati:e.casi_testati,note:e.note};i.push(t)})),i})).catch((function(e){return console.error(e),i}))},M=function(e,i){return Object(k.a)(Object(k.a)({},e),{},{deceduti:i?e.decedutiTotali-i.decedutiTotali:0,tamponi:i?e.tamponiTotali-i.tamponiTotali:0,totaleOspedalizzati:i?e.terapiaIntensiva+e.ricoveratiConSintomi:0,positiviTamponi:i&&e.tamponiTotali>i.tamponiTotali?Math.round(e.nuoviPositivi/(e.tamponiTotali-i.tamponiTotali)*1e4)/100:0})},w=[{codiceRegione:99,denominazioneRegione:"ITALIA",abbreviazione:"ITA"},{codiceRegione:13,denominazioneRegione:"Abruzzo",abbreviazione:"ABR"},{codiceRegione:17,denominazioneRegione:"Basilicata",abbreviazione:"BAS"},{codiceRegione:18,denominazioneRegione:"Calabria",abbreviazione:"CAL"},{codiceRegione:15,denominazioneRegione:"Campania",abbreviazione:"CAM"},{codiceRegione:8,denominazioneRegione:"Emilia romagna",abbreviazione:"EMR"},{codiceRegione:6,denominazioneRegione:"Friuli Venezia Giulia",abbreviazione:"FVG"},{codiceRegione:12,denominazioneRegione:"Lazio",abbreviazione:"LAZ"},{codiceRegione:7,denominazioneRegione:"Liguria",abbreviazione:"LIG"},{codiceRegione:3,denominazioneRegione:"Lombardia",abbreviazione:"LOM"},{codiceRegione:11,denominazioneRegione:"Marche",abbreviazione:"MAR"},{codiceRegione:14,denominazioneRegione:"Molise",abbreviazione:"MOL"},{codiceRegione:21,denominazioneRegione:"P.A. Bolzano",abbreviazione:"PAB"},{codiceRegione:22,denominazioneRegione:"P.A. Trento",abbreviazione:"PAT"},{codiceRegione:1,denominazioneRegione:"Piemonte",abbreviazione:"PIE"},{codiceRegione:16,denominazioneRegione:"Puglia",abbreviazione:"PUG"},{codiceRegione:20,denominazioneRegione:"Sardegna",abbreviazione:"SAR"},{codiceRegione:19,denominazioneRegione:"Sicilia",abbreviazione:"SIC"},{codiceRegione:9,denominazioneRegione:"Toscana",abbreviazione:"TOS"},{codiceRegione:10,denominazioneRegione:"Umbria",abbreviazione:"UMB"},{codiceRegione:2,denominazioneRegione:"Valle D'Aosta",abbreviazione:"VDA"},{codiceRegione:5,denominazioneRegione:"Veneto",abbreviazione:"VEN"}],I=Object(R.a)((function(e){return{container:{padding:e.spacing(2,3)},formControl:{minWidth:200},lastUpdate:{textAlign:"right",padding:e.spacing(2)},footer:{textAlign:"center",padding:e.spacing(2,0),backgroundColor:"#c0c0c0"}}})),N={1:{value:1,description:"Pazienti degenti",field:"ricoveratiConSintomi"},2:{value:2,description:"Pazienti intensiva",field:"terapiaIntensiva"},3:{value:3,description:"Totale degenti",field:"totaleOspedalizzati"},4:{value:4,description:"Decessi giornalieri",field:"deceduti"},5:{value:5,description:"Decessi totali",field:"decedutiTotali"},6:{value:6,description:"Tamponi giornalieri",field:"tamponi"},7:{value:7,description:"Tamponi totali",field:"tamponiTotali"},8:{value:8,description:"Nuovi positivi",field:"nuoviPositivi"},9:{value:9,description:"Totale positivi",field:"totalePositivi"},10:{value:10,description:"Totale casi",field:"totaleCasi"},11:{value:11,description:"% positivi/tamponi giornalieri",field:"positiviTamponi"}};function Y(e){var i=e.children,t=e.open,a=e.value;return Object(n.jsx)(g.a,{open:t,enterTouchDelay:0,placement:"top",title:a,arrow:!0,children:i})}var E=function(){var e=I(),i=Object(a.useState)(0),t=Object(j.a)(i,2),o=t[0],c=t[1],r=Object(a.useState)(1),s=Object(j.a)(r,2),l=s[0],u=s[1],m=Object(a.useState)(),b=Object(j.a)(m,2),g=b[0],R=b[1],T=Object(a.useState)([0,100]),k=Object(j.a)(T,2),A=k[0],S=k[1],E=Object(a.useState)(0),L=Object(j.a)(E,2),F=L[0],V=L[1],B=Object(a.useState)(100),G=Object(j.a)(B,2),U=G[0],K=G[1];Object(a.useEffect)((function(){Promise.all([P("https://raw.githubusercontent.com/pcm-dpc/COVID-19/master/dati-json/dpc-covid19-ita-regioni.json"),P("https://raw.githubusercontent.com/pcm-dpc/COVID-19/master/dati-json/dpc-covid19-ita-andamento-nazionale.json")]).then((function(e){var i,t=Object(j.a)(e,2),n=t[0],a=t[1];y.splice(0,y.length),_.splice(0,_.length),n.forEach((function(e){y.push(e)})),a.forEach((function(e){_.push(M(e,i)),i=e}))})).then((function(){V(0),K(_.length-1),S([0,_.length-1]),c(99)}))}),[]),Object(a.useEffect)((function(){o&&R(99===o?_:function(e){var i;return y.filter((function(i){return i.codiceRegione===e})).map((function(e){var t=M(e,i);return i=e,t}))}(o))}),[o]);var H=Object(a.useMemo)((function(){return g?g.filter((function(e,i){return i>=A[0]&&i<=A[1]})).map((function(e){return{data:D()(e.data).format("DD.MM.YYYY"),value:e[N[l].field]}})):[]}),[g,l,A]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(p.a,{maxWidth:"xl",className:e.container,children:Object(n.jsxs)(h.a,{container:!0,spacing:2,children:[Object(n.jsx)(h.a,{item:!0,xl:2,lg:2,md:3,sm:4,xs:6,children:Object(n.jsx)(v.a,{variant:"outlined",size:"small",className:e.formControl,children:Object(n.jsx)(O.a,{labelId:"demo-controlled-open-select-label",id:"demo-controlled-open-select",value:o,onChange:function(e){c(e.target.value)},placeholder:"Regione",children:w.map((function(e){return Object(n.jsx)(f.a,{value:e.codiceRegione,children:e.denominazioneRegione},"reg-".concat(e.codiceRegione))}))})})}),Object(n.jsx)(h.a,{item:!0,xl:2,lg:2,md:3,sm:4,xs:6,children:Object(n.jsx)(v.a,{variant:"outlined",size:"small",className:e.formControl,children:Object(n.jsx)(O.a,{labelId:"demo-controlled-open-select-label",id:"demo-controlled-open-select",value:l,onChange:function(e){u(e.target.value)},placeholder:"Grafico",children:Object.values(N).map((function(e){return Object(n.jsx)(f.a,{value:e.value,children:e.description},"gf-".concat(e.value))}))})})}),Object(n.jsx)(h.a,{item:!0,xl:8,lg:8,md:6,sm:4,xs:12,children:Object(n.jsx)("div",{className:e.lastUpdate,children:Object(n.jsxs)(x.a,{children:["Ultimo aggiornamento:"," ",g&&g.length?D()(g[g.length-1].data).format("DD/MM/YYYY"):"-"]})})}),Object(n.jsxs)(h.a,{item:!0,xs:12,children:[Object(n.jsx)(C.h,{width:"100%",height:700,children:Object(n.jsxs)(C.b,{data:H,margin:{top:5,right:30,left:20,bottom:5},children:[Object(n.jsx)(C.j,{dataKey:"data"}),Object(n.jsx)(C.k,{}),Object(n.jsx)(C.e,{strokeDasharray:"3 3"}),Object(n.jsx)(C.i,{}),Object(n.jsx)(C.g,{}),Object(n.jsx)(C.a,{type:"monotone",name:N[l].description,dataKey:"value",stroke:d.a[900],fill:d.a[700]})]})}),Object(n.jsx)(h.a,{item:!0,xs:12,style:{marginTop:"24px"},children:Object(n.jsx)(z.a,{value:A,min:F,max:U,valueLabelDisplay:"on",onChange:function(e,i){Array.isArray(i)&&S(i)},ValueLabelComponent:Y,valueLabelFormat:function(e){return _&&_.length?D()(_[e].data).format("DD.MM.YYYY"):e}})})]})]})}),Object(n.jsxs)("div",{className:e.footer,children:["Fonte dati:"," ",Object(n.jsx)("a",{href:"https://github.com/pcm-dpc/COVID-19",target:"_new",children:"Presidenza del Consiglio dei Ministri - Dipartimento della Protezione Civile"})]})]})},L=t(8),F=t(24),V=t(486),B=t(495),G=t(485),U=t(500),K=[],H=function(){return S.a.get("https://raw.githubusercontent.com/italia/covid19-opendata-vaccini/master/dati/vaccini-summary-latest.json").then((function(e){return e.data})).then((function(e){var i=[];return e.data.forEach((function(e){var t={index:e.index,area:e.area,dosiSomministrate:e.dosi_somministrate,dosiConsegnate:e.dosi_consegnate,percentualeSomministrazione:e.percentuale_somministrazione,ultimoAggiornamento:e.ultimo_aggiornamento};i.push(t)})),i})).then((function(e){return K=e}))},W=Object(R.a)((function(e){return{container:{padding:e.spacing(2,3)},buttons:{textAlign:"center"},lastUpdate:{textAlign:"right",padding:e.spacing(2)},footer:{textAlign:"center",padding:e.spacing(2,0),backgroundColor:"#c0c0c0"}}})),J=Object(L.a)((function(e){return{root:{color:e.palette.primary.main,"&$selected":{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.light}},padding:e.spacing(.75,2)},selected:{}}}),{withTheme:!0})(G.a),X=function(){var e=W(),i=Object(a.useState)(K),t=Object(j.a)(i,2),o=t[0],c=t[1],r=Object(a.useState)("values"),s=Object(j.a)(r,2),l=s[0],u=s[1],m=Object(a.useState)({}),b=Object(j.a)(m,2),g=b[0],v=b[1],O=Object(F.a)(),f=Object(V.a)(O.breakpoints.down("xs")),x=Object(V.a)(O.breakpoints.down("sm"));console.log("XS",f),console.log("SM",x);var z=Object(a.useCallback)((function(){var e={};w.forEach((function(i){e[i.abbreviazione]=i.denominazioneRegione})),v(e)}),[]);Object(a.useEffect)((function(){z(),H().then((function(e){c(e)}))}),[z]);var R=Object(a.useMemo)((function(){return o.sort((function(e,i){return e.area.localeCompare(i.area)})).map((function(e){return{regione:g[e.area]||e.area,"Dosi consegnate":e.dosiConsegnate,"Dosi somministrate":e.dosiSomministrate,"Percentuale somministrazioni":e.percentualeSomministrazione}}))}),[o,g]),T=Object(a.useMemo)((function(){var e;return o.forEach((function(i){var t=D()(i.ultimoAggiornamento);e&&!e.isBefore(t)||(e=t)})),e}),[o]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(p.a,{maxWidth:"xl",className:e.container,children:[Object(n.jsxs)(h.a,{container:!0,spacing:2,children:[Object(n.jsx)(B.a,{xsDown:!0,children:Object(n.jsx)(h.a,{item:!0,xs:12,sm:3})}),Object(n.jsx)(h.a,{item:!0,xs:12,sm:6,children:Object(n.jsx)("div",{className:e.buttons,children:Object(n.jsxs)(U.a,{size:"medium",value:l,exclusive:!0,onChange:function(e,i){u(i)},children:[Object(n.jsx)(J,{value:"values",children:"Valori"}),Object(n.jsx)(J,{value:"percent",children:"Percentuali"})]})})}),Object(n.jsx)(B.a,{xsDown:!0,children:Object(n.jsxs)(h.a,{item:!0,xs:12,sm:3,className:e.lastUpdate,children:["Ultimo aggiornamento: ",T?T.format("DD/MM/YYYY"):""]})})]}),Object(n.jsx)(C.h,{width:"100%",height:f?500:x?600:700,children:Object(n.jsxs)(C.d,{data:R,margin:{top:5,right:30,left:20,bottom:5},barGap:f?-3:x?-7:-15,children:[Object(n.jsx)(C.j,{dataKey:"regione",angle:-60,textAnchor:"end",height:130,interval:0}),Object(n.jsx)(C.k,{width:"values"===l?50:30}),Object(n.jsx)(C.e,{strokeDasharray:"3 3"}),Object(n.jsx)(C.i,{}),Object(n.jsx)(C.g,{}),"values"===l?Object(n.jsx)(C.c,{dataKey:"Dosi consegnate",stackId:"b",fill:d.a[700],stroke:d.a[900]}):null,"values"===l?Object(n.jsx)(C.c,{dataKey:"Dosi somministrate",stackId:"a",fill:d.a[400],stroke:d.a[600]}):Object(n.jsx)(C.c,{dataKey:"Percentuale somministrazioni",fill:d.a[700],stroke:d.a[900],children:x?null:Object(n.jsx)(C.f,{dataKey:"Percentuale somministrazioni",position:"top",formatter:function(e){return"".concat(Number.parseFloat(e).toFixed(1),"%")}})})]})})]}),Object(n.jsxs)("div",{className:e.footer,children:["Fonte dati:"," ",Object(n.jsx)("a",{href:"https://github.com/italia/covid19-opendata-vaccini",target:"_new",children:"Commissario straordinario per l'emergenza Covid-19"})]})]})},Z=t(487),$=t(488),q=t(489),Q=t(490),ee=t(497),ie=Object(R.a)((function(){return{title:{display:"flex",flexDirection:"column",flexGrow:1},subtitle:{lineHeight:"normal"},github:{color:"white"},link:{color:"white"}}})),te=function(e){var i=e.title,t=e.subtitle,o=e.linkName,c=e.link,r=ie(),s=Object(b.f)(),l=Object(a.useCallback)((function(){window.open("https://github.com/ermannos/covid-19-italy","_new")}),[]);return Object(n.jsx)(Z.a,{position:"static",children:Object(n.jsxs)($.a,{children:[Object(n.jsxs)("div",{className:r.title,children:[Object(n.jsx)(x.a,{variant:"h6",children:i}),Object(n.jsx)(x.a,{variant:"overline",className:r.subtitle,children:t})]}),Object(n.jsx)(q.a,{className:r.link,color:"inherit",onClick:function(){s.push(c)},children:o}),Object(n.jsx)(Q.a,{className:r.github,onClick:l,title:"GitHub repository",children:Object(n.jsx)(ee.a,{})})]})})},ne=(t(445),function(){return Object(n.jsx)(m.a,{basename:"/covid-19-italy",children:Object(n.jsxs)(b.c,{children:[Object(n.jsxs)(b.a,{exact:!0,path:["/"],children:[Object(n.jsx)(te,{title:"Covid-19 Italia",subtitle:"Andamento epidemia",linkName:"Vaccini",link:"/vaccini"}),Object(n.jsx)(E,{})]}),Object(n.jsxs)(b.a,{path:["/vaccini"],children:[Object(n.jsx)(te,{title:"Covid-19 Italia",subtitle:"Andamento campagna vaccinale",linkName:"Home",link:"/"}),Object(n.jsx)(X,{})]})]})})}),ae=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,501)).then((function(i){var t=i.getCLS,n=i.getFID,a=i.getFCP,o=i.getLCP,c=i.getTTFB;t(e),n(e),a(e),o(e),c(e)}))},oe={primary:{main:d.a[900]},secondary:u.a},ce=Object(s.a)({palette:oe});r.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(l.a,{theme:ce,children:Object(n.jsx)(ne,{})})}),document.getElementById("root")),ae()}},[[446,1,2]]]);
//# sourceMappingURL=main.78ff5ec3.chunk.js.map